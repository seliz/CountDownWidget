<html>
	<head>
		<style>
			html, body {
				position: relative;
				width: 1080px;
				height: 1920px;
				background-repeat: no-repeat;
				background-size: 1080px 1920px;
			}

			h1 {
				position: absolute;
				width: 658px;
				height: 167px;
				left: 211px;
				top: 20%;

				font-family: Ropa Sans;
				font-style: normal;
				font-weight: normal;
				font-size: 150px;
				line-height: 161px;
				display: flex;
				align-items: center;
				text-align: center;
				justify-content: center;
				z-index: 1000;
				color: #FFFFFF;
			}
			p {
				position: absolute;
				width: 902px;
				height: 113px;
				left: 89px;
				top: 915px;

				font-family: Ropa Sans;
				font-style: normal;
				font-weight: normal;
				font-size: 96px;
				line-height: 103px;
				display: flex;
				align-items: center;
				text-align: center;
				justify-content: center;
				color: #FFFFFF;
			}
			.rect {
				position: absolute;
				width: 658px;
				height: 167px;
				left: 211px;
				top: 25%;
				background: rgba(39, 156, 219, 0.75);
				border-radius: 50px;
				align-items: center;
				justify-content: center;
			}
			.rect2 {
				position: absolute;
				width: 802px;
				height: 113px;
				left: 139px;
				top: 1003px;
				background: rgba(66, 67, 69, 0.75);
				border-radius: 50px;
			}
		</style>
	</head>
	<body background="media://2044">
		<div class="rect"></div>
		<h1 id="eventname"></h1>
		<div class="rect2"></div>
		<p id='counter'></p>
		<script type="text/javascript">
			//datasource code
		omma.ready(function() {

			var ds, countDate, events, item, nameLabel, dateLabel;


			function random_selector(){
				nameLabel = document.getElementById("eventname");
				dateLabel = document.getElementById("counter");
				item = events[Math.floor(Math.random()*events.length)];
				nameLabel.innerHTML = item.name;
				var x = item.date;
				date_setter(x);
			}

			function date_setter(b){
				//Set the date
					countDate = new Date(b).getTime();
					
					//Update for each second
					var a = setInterval(function(){
						//Get today
						var now = new Date().getTime();
						//Get distance
						var distance = countDate - now;
						//Time
						var days = Math.floor(distance / (1000 * 60 * 60 * 24));
						var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000* 60 *60));
						var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
						var seconds = Math.floor((distance % (1000 * 60)) / 1000);
						//
						document.getElementById("counter").innerHTML = days + "d " + hours + "h " + minutes + "m " + seconds + "s ";

						if(distance < 0){
							clearInterval(a);
							document.getElementById("counter").innerHTML = "ITS TIME!";
						}
					}, 1000);
			}


			function init(){

				if (ds || countDate || events || item || nameLabel || dateLabel != null){
					
					ds, countDate, item, nameLabel, dateLabel == null;
					events = [];
					
				}

				ds = omma.datasource.get('CountDown');
				events = ds.data.events;
				

			}


			function main(){
					
					init();
					

					//document.getElementById("eventname").innerHTML = events[0].name;
					
					random_selector();
					setInterval(random_selector, 30000);
					

					ds.on('update', function(datasource) {
						var events = [ds.data];
						document.getElementById("eventname").innerHTML = events[0].name;

						var countDate = new Date(events[0].date).getTime();	
						
					});
			}
			main();

		});
			
				/**
                 * Player options
                 *
                 * name: Namespace
                 * items: Playlist items array [{type: 'image'|'video'|'html'|'iframe', src: string, duration: number, dateRangeEnabled?: boolean, startDate?: Date, endDate?: Date}]
                 * engine: Syncronization strategy ['playlist', 'playlist-sync-start']
                 * baseElement?: Optional base element where player is mounted
                 * syncPort?: Optional orchestrator port
                 * enableVideoPreload?: Force enable item preloading (Wont work on WebOS)
                 * showDebugComponent: Shows debug window on screen
                 
				 
                    var player = new Player({
                        items: __PLAYER_ITEMS__,
                        name: __PLAYER_ROOM__,
                        engine: __PLAYER_ENGINE__,
                        baseElement: document.querySelector('#player'),
                        showDebugComponent: true
                    });

                    return player
                        .init()
                        .then(function() {
                            return player.start({from: 0});
                        })
                        .catch(function(error) {
                            signalive.log({level: 'error', message: 'Could not start player', payload: error.message});
                        });
				**/
				
		</script>

	</body>
</html>